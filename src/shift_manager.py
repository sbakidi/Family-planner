# ... (merged content for src/shift_manager.py) ...